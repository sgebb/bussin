@* Reusable security information card shown on login/home pages *@

<div class="card">
    <div class="card-header" style="cursor: pointer;" @onclick="Toggle">
        <span class="me-2">ðŸ”’</span> 
        <strong>About Permissions & Security</strong>
        <span class="float-end">@(_isExpanded ? "â–¼" : "â–¶")</span>
    </div>
    @if (_isExpanded)
    {
        <div class="card-body">
            <h5>What permissions are requested?</h5>
            <p>This application uses a privacy-first approach with minimal required permissions:</p>
            <div class="mb-3">
                <strong>1. Azure Service Bus API</strong> (required at initial sign-in)
                <ul>
                    <li>Send and receive messages from queues, topics, and subscriptions</li>
                    <li>Perform message operations (peek, delete, purge, etc.)</li>
                    <li>List queues and topics within a namespace you provide</li>
                </ul>
            </div>
            <div class="mb-3">
                <strong>2. Azure Management API</strong> (required - requested after sign-in)
                <ul>
                    <li>Automatically browse and list your Service Bus namespaces</li>
                </ul>
            </div>
            
            <h5 class="mt-3">Is this safe?</h5>
            <p>Yes! This application is completely safe:</p>
            <ul>
                <li><strong>Zero backend</strong> - All operations run directly in your browser</li>
                <li><strong>Your credentials never leave your device</strong> - Authentication is handled by Microsoft's secure login</li>
                <li><strong>No data storage</strong> - Nothing is saved to any server</li>
                <li><strong>Open source</strong> - You can review the code yourself</li>
                <li><strong>Uses your existing permissions</strong> - You can only access resources you already have access to</li>
            </ul>
            
            <h5 class="mt-3">Can I revoke access?</h5>
            <p>Yes, you can revoke these permissions at any time through your <a href="https://myapplications.microsoft.com/" target="_blank">Microsoft account settings</a>.</p>
        </div>
    }
</div>

@code {
    [Parameter] public bool InitiallyExpanded { get; set; }
    
    private bool _isExpanded;

    protected override void OnInitialized()
    {
        _isExpanded = InitiallyExpanded;
    }

    private void Toggle() => _isExpanded = !_isExpanded;
}
